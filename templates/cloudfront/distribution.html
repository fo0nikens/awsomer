{% extends 'cloudfront/base.html' %}
{% block subheader %}Distribution{% endblock %}
{% load humanize %}

{% block cloudfront_body %}
<div class="row">
<h2>{{ distribution.name }}</small></h2>
</div>
<div class="row">
    <form action="" method="post">
        {% csrf_token %}
    
        <button type="submit" class="btn btn-primary" onclick="return confirm('Are you sure you want to clear all of the mssages in {{ distribution.name }}?');" name="_clear">Clear All Messages</button>
        <button type="submit" class="btn btn-primary" onclick="return confirm('Are you sure you want to dump all of the mssages in {{ distribution.name }} it S3?');" name="_dump">Dump Distribution to S3</button>
{% endcomment %}
        <button type="submit" class="btn btn-primary" onclick="return confirm('Are you sure you want to delete {{ distribution.name }}?');" name="_delete">Delete</button>
    </form>
</div>
<div class="row">
    <h3>Distribution Details</h3>
    <table class="table table-hover">
        <tr><th>Name</th><td>{{ distribution.name }}</td></tr>
        <tr><th>Message Count</th><td>{{ distribution.ApproximateNumberOfMessages }}</td></tr>
        <tr><th>Messages in Flight</th><td>{{ distribution.ApproximateNumberOfMessagesNotVisible }}</td></tr>
	<tr><th>Message Retention Period</th><td>{% widthratio distribution.MessageRetentionPeriod 86400 1 %} Days</td></tr>
        <tr><th>Max Message Size</th><td>{% widthratio distribution.MaximumMessageSize 1024 1 %} KB</td></tr>
    </table>
</div>
<div class="row">
    <h3>Add Message</h3>
    <form action="/cloudfront/distributions/{{ distribution.name }}" method="post">{% csrf_token %}
    <table class='table'>
    {% for field in form %}
        <tr>
            <td>{{ field.label_tag }}</td><td>{{ field }}</td><td>{{ field.errors }}</td>
        </tr>
    {% endfor %}
    <td></td><td><input class='btn btn-primary' type="submit" value="Submit" /></td>
    </table>
    </form>
</div>

{% endblock %}
